#!/usr/bin/env ruby

require_relative '../config/environment'

puts "Welcome to Tic Tac Toe!"
puts "How many human players do we have today: 0, 1, or 2?"

setup_1 = Game.new(player_1 = Players::Computer.new("X"), player_2 = Players::Computer.new("O"))
setup_2 = Game.new(player_1 = Players::Human.new("X"), player_2 = Players::Computer.new("O"))
setup_3 = Game.new(player_1 = Players::Computer.new("X"), player_2 = Players::Human.new("O"))
setup_4 = Game.new(player_1 = Players::Human.new("X"), player_2 = Players::Human.new("O"))

input = gets.strip

if input == 0.to_s
  puts "OK, the computer will play against itself!"
  sleep 1
  until setup_1.over?
    setup_1.play
  end

elsif input == 1.to_s
  puts "OK, you'll be playing against the computer!"
  sleep 1
  puts "Would you like to go first and play as X ? (Y or N)"

  input = gets.strip
  if input.downcase == "y" || input.downcase == "yes"
    puts "Excellent! Game on!"
    until setup_2.over?
      setup_2.play
    end

  elsif input.downcase == "n" || input.downcase == "no"
    puts "Sounds good!  The computer will go first."
    sleep 1
    until setup_3.over?
      setup_3.play
    end
  end

elsif input == 2.to_s
  puts "Great, I'm glad you've found a friend to play against!"
  sleep 1
  puts "Whoever goes first will play as X...I'll let you two duke it out!"
  until setup_4.over?
    setup_4.play
  end

end
